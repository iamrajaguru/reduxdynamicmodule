{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\n\nvar ReducerManager_1 = require(\"./ReducerManager\");\n\nfunction getModuleManager(middlewareManager, extensions, advancedCombineReducers) {\n  var _dispatch = null;\n\n  var _reducerManager;\n\n  var _modules = [];\n\n  var _moduleIds = new Set();\n\n  var _seedReducers = function () {\n    _dispatch({\n      type: \"@@Internal/ModuleManager/SeedReducers\"\n    });\n  };\n\n  var _dispatchActions = function (actions) {\n    if (!actions) {\n      return;\n    }\n\n    if (!_dispatch) {\n      throw new Error(\"setDispatch should be called on ModuleManager before adding any modules.\");\n    }\n\n    actions.forEach(_dispatch);\n  };\n\n  var _addMiddlewares = function (middlewares) {\n    if (!middlewares) {\n      return;\n    }\n\n    middlewareManager.add(middlewares);\n  };\n\n  var _removeMiddlewares = function (middlewares) {\n    if (!middlewares) {\n      return;\n    }\n\n    middlewareManager.remove(middlewares);\n  };\n\n  var _addReducers = function (reducerMap) {\n    if (!reducerMap) {\n      return;\n    }\n\n    if (!_reducerManager) {\n      _reducerManager = ReducerManager_1.getRefCountedReducerManager( // @ts-ignore\n      ReducerManager_1.getReducerManager(reducerMap, advancedCombineReducers));\n    } else {\n      for (var key in reducerMap) {\n        _reducerManager.add(key, reducerMap[key]);\n      }\n    }\n  };\n\n  var _removeReducers = function (reducerMap) {\n    if (!reducerMap || !_reducerManager) {\n      return;\n    }\n\n    for (var key in reducerMap) {\n      _reducerManager.remove(key);\n    }\n  }; // Create reduce function which redirects to _reducers.reduce\n\n\n  var _reduce = function (s, a) {\n    if (_reducerManager) {\n      return _reducerManager.reduce(s, a);\n    }\n\n    return s || null;\n  };\n\n  var moduleManager = {\n    getReducer: _reduce,\n    setDispatch: function (dispatch) {\n      _dispatch = dispatch;\n    },\n    getItems: function () {\n      return [];\n    },\n    add: function (modulesToAdd) {\n      if (!modulesToAdd || modulesToAdd.length === 0) {\n        return;\n      }\n\n      modulesToAdd = modulesToAdd.filter(function (module) {\n        return module;\n      });\n      var justAddedModules = [];\n      modulesToAdd.forEach(function (module) {\n        if (!_moduleIds.has(module.id)) {\n          _moduleIds.add(module.id);\n\n          _modules.push(module);\n\n          _addReducers(module.reducerMap);\n\n          var middlewares = module.middlewares;\n\n          if (middlewares) {\n            _addMiddlewares(middlewares);\n          }\n\n          justAddedModules.push(module);\n        }\n      });\n      /* Fire an action so that the newly added reducers can seed their initial state */\n\n      _seedReducers(); // add the sagas and dispatch actions at the end so all the reducers are registered\n\n\n      justAddedModules.forEach(function (module) {\n        // Let the extensions know we added a module\n        extensions.forEach(function (p) {\n          if (p.onModuleAdded) {\n            p.onModuleAdded(module);\n          }\n        }); // Dispatch the initial actions\n\n        var moduleAddedAction = {\n          type: \"@@Internal/ModuleManager/ModuleAdded\",\n          payload: module.id\n        };\n\n        _dispatchActions(module.initialActions ? [moduleAddedAction].concat(module.initialActions) : [moduleAddedAction]);\n      });\n    },\n    remove: function (modulesToRemove) {\n      if (!modulesToRemove) {\n        return;\n      }\n\n      modulesToRemove = modulesToRemove.filter(function (module) {\n        return module;\n      }).reverse();\n      modulesToRemove.forEach(function (module) {\n        if (_moduleIds.has(module.id)) {\n          _dispatchActions(module.finalActions);\n\n          _removeReducers(module.reducerMap);\n\n          _removeMiddlewares(module.middlewares); // Let the extensions know we removed a module\n\n\n          extensions.forEach(function (p) {\n            if (p.onModuleRemoved) {\n              p.onModuleRemoved(module);\n            }\n          });\n\n          _moduleIds[\"delete\"](module.id);\n\n          _modules = _modules.filter(function (m) {\n            return m.id !== module.id;\n          });\n\n          _dispatchActions([{\n            type: \"@@Internal/ModuleManager/ModuleRemoved\",\n            payload: module.id\n          }]);\n        }\n      });\n    },\n    dispose: function () {\n      moduleManager.remove(_modules);\n    }\n  };\n  return moduleManager;\n}\n\nexports.getModuleManager = getModuleManager;","map":{"version":3,"sources":["/home/rajaguru/Projects/KowthamDynamicModule/redux-dynamic-module/node_modules/redux-dynamic-modules-core/lib/Managers/ModuleManager.js"],"names":["exports","__esModule","ReducerManager_1","require","getModuleManager","middlewareManager","extensions","advancedCombineReducers","_dispatch","_reducerManager","_modules","_moduleIds","Set","_seedReducers","type","_dispatchActions","actions","Error","forEach","_addMiddlewares","middlewares","add","_removeMiddlewares","remove","_addReducers","reducerMap","getRefCountedReducerManager","getReducerManager","key","_removeReducers","_reduce","s","a","reduce","moduleManager","getReducer","setDispatch","dispatch","getItems","modulesToAdd","length","filter","module","justAddedModules","has","id","push","p","onModuleAdded","moduleAddedAction","payload","initialActions","concat","modulesToRemove","reverse","finalActions","onModuleRemoved","m","dispose"],"mappings":"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","sourcesContent":["\"use strict\";\nexports.__esModule = true;\nvar ReducerManager_1 = require(\"./ReducerManager\");\nfunction getModuleManager(middlewareManager, extensions, advancedCombineReducers) {\n    var _dispatch = null;\n    var _reducerManager;\n    var _modules = [];\n    var _moduleIds = new Set();\n    var _seedReducers = function () {\n        _dispatch({ type: \"@@Internal/ModuleManager/SeedReducers\" });\n    };\n    var _dispatchActions = function (actions) {\n        if (!actions) {\n            return;\n        }\n        if (!_dispatch) {\n            throw new Error(\"setDispatch should be called on ModuleManager before adding any modules.\");\n        }\n        actions.forEach(_dispatch);\n    };\n    var _addMiddlewares = function (middlewares) {\n        if (!middlewares) {\n            return;\n        }\n        middlewareManager.add(middlewares);\n    };\n    var _removeMiddlewares = function (middlewares) {\n        if (!middlewares) {\n            return;\n        }\n        middlewareManager.remove(middlewares);\n    };\n    var _addReducers = function (reducerMap) {\n        if (!reducerMap) {\n            return;\n        }\n        if (!_reducerManager) {\n            _reducerManager = ReducerManager_1.getRefCountedReducerManager(\n            // @ts-ignore\n            ReducerManager_1.getReducerManager(reducerMap, advancedCombineReducers));\n        }\n        else {\n            for (var key in reducerMap) {\n                _reducerManager.add(key, reducerMap[key]);\n            }\n        }\n    };\n    var _removeReducers = function (reducerMap) {\n        if (!reducerMap || !_reducerManager) {\n            return;\n        }\n        for (var key in reducerMap) {\n            _reducerManager.remove(key);\n        }\n    };\n    // Create reduce function which redirects to _reducers.reduce\n    var _reduce = function (s, a) {\n        if (_reducerManager) {\n            return _reducerManager.reduce(s, a);\n        }\n        return s || null;\n    };\n    var moduleManager = {\n        getReducer: _reduce,\n        setDispatch: function (dispatch) {\n            _dispatch = dispatch;\n        },\n        getItems: function () { return []; },\n        add: function (modulesToAdd) {\n            if (!modulesToAdd || modulesToAdd.length === 0) {\n                return;\n            }\n            modulesToAdd = modulesToAdd.filter(function (module) { return module; });\n            var justAddedModules = [];\n            modulesToAdd.forEach(function (module) {\n                if (!_moduleIds.has(module.id)) {\n                    _moduleIds.add(module.id);\n                    _modules.push(module);\n                    _addReducers(module.reducerMap);\n                    var middlewares = module.middlewares;\n                    if (middlewares) {\n                        _addMiddlewares(middlewares);\n                    }\n                    justAddedModules.push(module);\n                }\n            });\n            /* Fire an action so that the newly added reducers can seed their initial state */\n            _seedReducers();\n            // add the sagas and dispatch actions at the end so all the reducers are registered\n            justAddedModules.forEach(function (module) {\n                // Let the extensions know we added a module\n                extensions.forEach(function (p) {\n                    if (p.onModuleAdded) {\n                        p.onModuleAdded(module);\n                    }\n                });\n                // Dispatch the initial actions\n                var moduleAddedAction = {\n                    type: \"@@Internal/ModuleManager/ModuleAdded\",\n                    payload: module.id\n                };\n                _dispatchActions(module.initialActions\n                    ? [moduleAddedAction].concat(module.initialActions) : [moduleAddedAction]);\n            });\n        },\n        remove: function (modulesToRemove) {\n            if (!modulesToRemove) {\n                return;\n            }\n            modulesToRemove = modulesToRemove\n                .filter(function (module) { return module; })\n                .reverse();\n            modulesToRemove.forEach(function (module) {\n                if (_moduleIds.has(module.id)) {\n                    _dispatchActions(module.finalActions);\n                    _removeReducers(module.reducerMap);\n                    _removeMiddlewares(module.middlewares);\n                    // Let the extensions know we removed a module\n                    extensions.forEach(function (p) {\n                        if (p.onModuleRemoved) {\n                            p.onModuleRemoved(module);\n                        }\n                    });\n                    _moduleIds[\"delete\"](module.id);\n                    _modules = _modules.filter(function (m) { return m.id !== module.id; });\n                    _dispatchActions([\n                        {\n                            type: \"@@Internal/ModuleManager/ModuleRemoved\",\n                            payload: module.id\n                        },\n                    ]);\n                }\n            });\n        },\n        dispose: function () {\n            moduleManager.remove(_modules);\n        }\n    };\n    return moduleManager;\n}\nexports.getModuleManager = getModuleManager;\n"]},"metadata":{},"sourceType":"script"}