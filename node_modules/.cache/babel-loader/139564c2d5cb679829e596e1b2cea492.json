{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\n\nvar redux_1 = require(\"redux\");\n\nvar developmentOnly_1 = require(\"redux-devtools-extension/developmentOnly\");\n\nvar MiddlewareManager_1 = require(\"./Managers/MiddlewareManager\");\n\nvar ModuleManager_1 = require(\"./Managers/ModuleManager\");\n\nvar RefCountedManager_1 = require(\"./Managers/RefCountedManager\");\n\nvar Flatten_1 = require(\"./Utils/Flatten\");\n\nfunction createStore(moduleStoreSettings) {\n  var initialModules = [];\n\n  for (var _i = 1; _i < arguments.length; _i++) {\n    initialModules[_i - 1] = arguments[_i];\n  }\n\n  var _a = moduleStoreSettings.initialState,\n      initialState = _a === void 0 ? {} : _a,\n      _b = moduleStoreSettings.extensions,\n      extensions = _b === void 0 ? [] : _b,\n      _c = moduleStoreSettings.enhancers,\n      enhancers = _c === void 0 ? [] : _c,\n      _d = moduleStoreSettings.advancedComposeEnhancers,\n      advancedComposeEnhancers = _d === void 0 ? developmentOnly_1.composeWithDevTools({}) : _d,\n      advancedCombineReducers = moduleStoreSettings.advancedCombineReducers;\n  var extensionMiddleware = extensions.reduce(function (mw, p) {\n    if (p.middleware) {\n      mw.push.apply(mw, p.middleware);\n    }\n\n    return mw;\n  }, []);\n  var middlewareManager = RefCountedManager_1.getRefCountedManager(MiddlewareManager_1.getMiddlewareManager(), function (a, b) {\n    return a === b;\n  });\n  var enhancer = advancedComposeEnhancers.apply(void 0, enhancers.concat([redux_1.applyMiddleware.apply(void 0, extensionMiddleware.concat([middlewareManager.enhancer]))]));\n  var moduleManager = RefCountedManager_1.getRefCountedManager(ModuleManager_1.getModuleManager(middlewareManager, extensions, advancedCombineReducers), function (a, b) {\n    return a.id === b.id;\n  }, function (a) {\n    return a.retained;\n  }); // Create store\n\n  var store = redux_1.createStore(moduleManager.getReducer, initialState, enhancer);\n  moduleManager.setDispatch(store.dispatch);\n\n  var addModules = function (modulesToBeAdded) {\n    var flattenedModules = Flatten_1.flatten(modulesToBeAdded);\n    moduleManager.add(flattenedModules);\n    return {\n      remove: function () {\n        moduleManager.remove(flattenedModules);\n      }\n    };\n  };\n\n  var addModule = function (moduleToBeAdded) {\n    return addModules([moduleToBeAdded]);\n  };\n\n  extensions.forEach(function (p) {\n    if (p.onModuleManagerCreated) {\n      p.onModuleManagerCreated({\n        addModule: addModule,\n        addModules: addModules\n      });\n    }\n  });\n  store.addModule = addModule;\n  store.addModules = addModules;\n\n  store.dispose = function () {\n    // get all added modules and remove them\n    moduleManager.dispose();\n    middlewareManager.dispose();\n    extensions.forEach(function (p) {\n      if (p.dispose) {\n        p.dispose();\n      }\n    });\n  };\n\n  store.addModules(initialModules);\n  return store;\n}\n\nexports.createStore = createStore;","map":{"version":3,"sources":["/home/rajaguru/Projects/KowthamDynamicModule/redux-dynamic-module/node_modules/redux-dynamic-modules-core/lib/ModuleStore.js"],"names":["exports","__esModule","redux_1","require","developmentOnly_1","MiddlewareManager_1","ModuleManager_1","RefCountedManager_1","Flatten_1","createStore","moduleStoreSettings","initialModules","_i","arguments","length","_a","initialState","_b","extensions","_c","enhancers","_d","advancedComposeEnhancers","composeWithDevTools","advancedCombineReducers","extensionMiddleware","reduce","mw","p","middleware","push","apply","middlewareManager","getRefCountedManager","getMiddlewareManager","a","b","enhancer","concat","applyMiddleware","moduleManager","getModuleManager","id","retained","store","getReducer","setDispatch","dispatch","addModules","modulesToBeAdded","flattenedModules","flatten","add","remove","addModule","moduleToBeAdded","forEach","onModuleManagerCreated","dispose"],"mappings":"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","sourcesContent":["\"use strict\";\nexports.__esModule = true;\nvar redux_1 = require(\"redux\");\nvar developmentOnly_1 = require(\"redux-devtools-extension/developmentOnly\");\nvar MiddlewareManager_1 = require(\"./Managers/MiddlewareManager\");\nvar ModuleManager_1 = require(\"./Managers/ModuleManager\");\nvar RefCountedManager_1 = require(\"./Managers/RefCountedManager\");\nvar Flatten_1 = require(\"./Utils/Flatten\");\nfunction createStore(moduleStoreSettings) {\n    var initialModules = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        initialModules[_i - 1] = arguments[_i];\n    }\n    var _a = moduleStoreSettings.initialState, initialState = _a === void 0 ? {} : _a, _b = moduleStoreSettings.extensions, extensions = _b === void 0 ? [] : _b, _c = moduleStoreSettings.enhancers, enhancers = _c === void 0 ? [] : _c, _d = moduleStoreSettings.advancedComposeEnhancers, advancedComposeEnhancers = _d === void 0 ? developmentOnly_1.composeWithDevTools({}) : _d, advancedCombineReducers = moduleStoreSettings.advancedCombineReducers;\n    var extensionMiddleware = extensions.reduce(function (mw, p) {\n        if (p.middleware) {\n            mw.push.apply(mw, p.middleware);\n        }\n        return mw;\n    }, []);\n    var middlewareManager = RefCountedManager_1.getRefCountedManager(MiddlewareManager_1.getMiddlewareManager(), function (a, b) { return a === b; });\n    var enhancer = advancedComposeEnhancers.apply(void 0, enhancers.concat([redux_1.applyMiddleware.apply(void 0, extensionMiddleware.concat([middlewareManager.enhancer]))]));\n    var moduleManager = RefCountedManager_1.getRefCountedManager(ModuleManager_1.getModuleManager(middlewareManager, extensions, advancedCombineReducers), function (a, b) { return a.id === b.id; }, function (a) { return a.retained; });\n    // Create store\n    var store = redux_1.createStore(moduleManager.getReducer, initialState, enhancer);\n    moduleManager.setDispatch(store.dispatch);\n    var addModules = function (modulesToBeAdded) {\n        var flattenedModules = Flatten_1.flatten(modulesToBeAdded);\n        moduleManager.add(flattenedModules);\n        return {\n            remove: function () {\n                moduleManager.remove(flattenedModules);\n            }\n        };\n    };\n    var addModule = function (moduleToBeAdded) {\n        return addModules([moduleToBeAdded]);\n    };\n    extensions.forEach(function (p) {\n        if (p.onModuleManagerCreated) {\n            p.onModuleManagerCreated({\n                addModule: addModule,\n                addModules: addModules\n            });\n        }\n    });\n    store.addModule = addModule;\n    store.addModules = addModules;\n    store.dispose = function () {\n        // get all added modules and remove them\n        moduleManager.dispose();\n        middlewareManager.dispose();\n        extensions.forEach(function (p) {\n            if (p.dispose) {\n                p.dispose();\n            }\n        });\n    };\n    store.addModules(initialModules);\n    return store;\n}\nexports.createStore = createStore;\n"]},"metadata":{},"sourceType":"script"}